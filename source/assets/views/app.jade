doctype html
html
	head
		//- charset
		meta(charset='utf-8')
		
		//- title
		title HS Hackers
		
		//- stylesheet
		link(href='/css/app.css', rel='stylesheet')
		
		//- mixpanel
		script.
			(function(f,b){if(!b.__SV){var a,e,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");
			for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=f.createElement("script");a.type="text/javascript";a.async=!0;a.src="http://cdn.mxpnl.com/libs/mixpanel-2.2.min.js";e=f.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}})(document,window.mixpanel||[]);
			mixpanel.init("0b23b577ea179db6183cf2611fa2da1b");
	
	body
		//- viewport
		#viewport
			#app-loading: .box
				.spinner
				.label
			#config-notice: .box
			
			include app/loading
			
			include app/home
			include app/talks
			
			include app/signin
			include app/signin-email
			include app/signin-service
			include app/signin-successful
			include app/signout
		
		//- component scripts
		script(src='js/components/jquery.js')
		script(src='js/components/velocity.js')
		script(src='js/components/underscore.js')
		script(src='js/components/backbone.js')
		script(src='js/components/async.js')
		script(src='js/components/moment.js')
		script.
			moment.lang('en', { relativeTime: { future: 'in %s', past: '%s ago', s: 'seconds', m: '1 minute', mm: '%d minutes', h: '1 hour', hh: '%d hours', d: '1 day', dd: '%d days', M: '1 month', MM: '%d months', y: '1 year', yy: '%d years' } });
		
		//- cordova script
		script(src='cordova.js')
		
		//- init config
		script.
			var config = {
					// baseURL: 'http://localhost:3000'
					// baseURL: 'http://beta.hshackers.org'
					baseURL: 'http://hshackers.org'
				};
		
		//- ui scripts
		script(src='js/common/ui/button.js')
		script(src='js/common/ui/spinner.js')
		script(src='js/common/ui/touch.js')
		
		//- framework classes
		script(src='js/common/classes/app.js')
		script(src='js/common/classes/view.js')
		
		//- views
		script(src='js/views/loading.js')
		
		script(src='js/views/home.js')
		script(src='js/views/talks.js')
		
		script(src='js/views/signin.js')
		script(src='js/views/signin-email.js')
		script(src='js/views/signin-service.js')
		script(src='js/views/signin-successful.js')
		script(src='js/views/signout.js')
		
		//- index script
		script(src='js/index.js')
		
		//- app init
		script.
			$(function() {
				// console.log( '[root] - App running locally...' );
				app._local = true;
				if (!/(iphone)|(ipad)|(android)/i.test(navigator.userAgent) ) {
					// console.log( '[root] - Detected non-mobile device, initalising app...' );
					app.init();
				} else {
					console.log( '[root] - Detected mobile device, setting device ready event...' );
					$(document).on('deviceready', function() {
						navigator.splashscreen && navigator.splashscreen.hide && navigator.splashscreen.hide();
						// console.log( '[root] - Mobile device is ready...' );
						// console.log( '[root] - Triggering app init.' );
						app.init();
					});
				}
			});
		
		//- google analytics (initalised when app loads, due to dynamic client id)
		script.
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','http://www.google-analytics.com/analytics.js','ga');
			
